{"version":3,"sources":["utils/createCanvas.js","utils/background.js","utils/createElement.js","utils/rect.js","utils/squares.js","demos/demo-a-perf.js","utils/circle.js","utils/miniEngine.js","utils/line.js","demos/demo-b-perf.js","sketch.js"],"names":["opts","canvas","document","createElement","container","getElementById","width","height","style","appendChild","ctx","getContext","color","fillStyle","fillRect","window","innerWidth","type","attr","element","Object","entries","forEach","key","value","setAttribute","children","child","createTextNode","x","y","w","h","c","callback","count","_","Array","map","el","i","index","length","renderUiA","domTarget","innerHTML","speedButton","resetButton","wrapper","precalc","range","_index","pre","initial","conf2","conf3","conf4","conf5","conf6","save","translate","Math","floor","restore","r","beginPath","arc","PI","stroke","blackCircle","fill","offset","angle","_r","strokeStyle","cos","sin","x1","y1","x2","y2","moveTo","lineTo","init_ui","revealButton","cb","onclick","greyline","revealMechanism","revealOnclick","button","point","pxr","pyr","pxl","pyl","pxv","pyv","pxh","pyh","rm","rMech","worker","Worker","demos","demoA","demoB","demo","frames","currentDemo","preDemoA","mult","preDemoB","speed","postMessage","onmessage","e","data","next","prev","classList","add","remove","draw","requestAnimationFrame"],"mappings":"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","file":"sketch.702e4367.map","sourceRoot":"../src","sourcesContent":["export default (opts) => {\n  const canvas = document.createElement('canvas')\n  const container = document.getElementById('canvas-container')\n  canvas.width = opts.width\n  canvas.height = opts.height\n  canvas.style = 'box-shadow: 1px 2px 10px 0px rgba(0,0,0,0.2)'\n  container.appendChild(canvas)\n  const ctx = canvas.getContext('2d')\n  return {canvas, ctx }\n}\n\n","export default (color, ctx) => {\n  ctx.fillStyle = color\n  ctx.fillRect(0, 0, window.innerWidth, 500)\n}\n\n","export default (type, attr = {}, ...children) => {\n  const element = document.createElement(type)\n  Object.entries(attr).forEach(([key, value]) => {\n    element.setAttribute(key, value)\n  })\n  children.forEach(child => {\n    if (typeof child === 'string') {\n      element.appendChild(document.createTextNode(child))\n    } else {\n      element.appendChild(child)\n    }\n  })\n  return element\n}\n","export default (opts, ctx) => {\n  const {x, y, w, h, c} = opts\n  ctx.fillStyle = c\n  ctx.fillRect(x, y, w, h)\n}\n\n","import rect from './rect.js'\n\nexport default (opts, callback, ctx) => {\n  let { count, x, y, w, h, c } = opts\n  let _ = [...Array(count)].map((el, i) => i)\n  return _.map(index => {\n    rect(\n      {\n        x: x + index * w,\n        y: callback ? callback(index, _.length) + y : y,\n        w: w,\n        h: h,\n        c: c,\n      },\n      ctx,\n    )\n  })\n}\n\n","import squares from '../utils/squares.js'\nimport el from '../utils/createElement.js'\n\nexport const renderUiA = () => {\n  const domTarget = document.getElementById('wrapper')\n  domTarget.innerHTML = ''\n  const speedButton = el('button', {'class': 'btn normal-btn normal'}, '2X SPEED')\n  const resetButton = el('button', {'class': 'btn normal-btn normal'}, 'RESET')\n  const wrapper = el('div', {}, speedButton, resetButton)\n  domTarget.appendChild(wrapper)\n  return [resetButton, speedButton]\n}\n\nexport default (ctx, precalc, range)=> {\n  let _index = 0\n  let pre = precalc\n  // setup\n  const initial = {\n    count: 20,\n    x: -100,\n    y: -140,\n    w: 10,\n    h: 10,\n    c: 'rgb(250, 30, 50)',\n  }\n  const {y} = initial\n  const conf2 = {...initial, y: y + 50, c: 'rgb(250,30,80)'}\n  const conf3 = {...initial, y: y + 100, c: 'rgb(250,30,100)'}\n  const conf4 = {...initial, y: y + 150, c: 'rgb(200,30,100)'}\n  const conf5 = {...initial, y: y + 200, c: 'rgb(100,30,200)'}\n  const conf6 = {...initial, y: y + 250, c: 'rgb(100,30,250)'}\n  // side-effect\n  return () => {\n    ctx.save()\n    ctx.translate(Math.floor(window.innerWidth / 2), 250)\n    squares(initial, index => pre[_index][0][index], ctx)\n    squares(conf2, index => pre[_index][1][index], ctx)\n    squares(conf3, index => pre[_index][2][index], ctx)\n    squares(conf4, index => pre[_index][3][index], ctx)\n    squares(conf5, index => pre[_index][4][index], ctx)\n    squares(conf6, index => pre[_index][5][index], ctx)\n    _index += 1\n    if(_index >= range) _index = _index%range\n    ctx.restore()\n  }\n}\n","export default (x, y, r, ctx) => {\n  ctx.beginPath()\n  ctx.arc(x, y, r, 0, 2 * Math.PI)\n  ctx.stroke()\n}\n","import circle from './circle.js'\n\nconst blackCircle = (x, y, r, ctx) => {\n  ctx.save()\n  ctx.fillStyle = '#333'\n  circle(x, y, r, ctx)\n  ctx.fill()\n  ctx.restore()\n}\nexport default (x, y, r, offset, angle, ctx) => {\n  const _r = r / 3\n  ctx.save()\n  ctx.strokeStyle = 'rgba(0,0,0,0.1)'\n  circle(x, y, r, ctx)\n  blackCircle(\n    x + r * Math.cos(angle + offset),\n    y + r * Math.sin(angle + offset),\n    _r*0.7,\n    ctx\n  )\n  ctx.restore()\n}\n\n","export default (x1, y1, x2, y2, ctx) => {\n  ctx.beginPath()\n  ctx.moveTo(x1, y1)\n  ctx.lineTo(x2, y2)\n  ctx.stroke()\n}\n","import miniEngine from '../utils/miniEngine.js'\nimport line from '../utils/line.js'\nimport el from '../utils/createElement.js'\n\nconst init_ui = () => {\n  const domTarget = document.getElementById('wrapper')\n  domTarget.innerHTML = ''\n  const revealButton = el('button',\n    {'class': 'btn normal-btn normal'},\n    'Reveal Mechanism'\n  )\n  domTarget.appendChild(revealButton)\n  return (cb) => {\n    revealButton.onclick = () => {\n      cb(revealButton)\n    }\n  }\n}\n\nconst greyline = (x, y, x1, y1, ctx) => {\n  ctx.save()\n  ctx.strokeStyle = '#aaa'\n  line(x, y, x1, y1, ctx)\n  ctx.restore()\n}\n\nexport default (ctx, precalc, range) => {\n  // config.\n  let revealMechanism = false\n  let revealOnclick = init_ui()\n  let r = 15 // radius of each circle.\n\n  revealOnclick((button) =>{\n    if(!revealMechanism) button.innerHTML = 'Hide Mechanism'\n    if(revealMechanism)button.innerHTML = 'Reveal Mechanism'\n    revealMechanism = !revealMechanism\n  })\n\n  let _index = 0\n  return () => {\n    ctx.save()\n    ctx.translate(window.innerWidth/2 - 120, 120)\n    precalc[_index].map(point => {\n      const { x, y } = point\n      if(point.pxr && point.pyr){\n        const {pxr, pyr} = point\n        greyline(x, y, pxr, pyr, ctx)\n      }\n      if(point.pxl && point.pyl){\n        const {pxl, pyl} = point\n        greyline(x, y, pxl, pyl, ctx)\n      }\n      if(point.pxv && point.pyv){\n        const {pxv, pyv} = point\n        line(x, y, pxv, pyv, ctx)\n      }\n      if(point.pxh && point.pyh){\n        const {pxh, pyh} = point\n        line(x, y, pxh, pyh, ctx)\n      }\n      if(revealMechanism){\n        const {rMech: rm} = point\n        greyline(rm.x, rm.y, x, y, ctx)\n        miniEngine(rm.x, rm.y, r, rm.offset, rm.angle, ctx)\n      }\n    })\n    ctx.restore()\n    _index += 1\n    if(_index >= range) {\n      _index = _index%range\n    }\n  }\n}\n\n","import createCanvas from './utils/createCanvas.js'\nimport background from './utils/background.js'\nimport el from './utils/createElement.js'\n\nimport demoA from './demos/demo-a-perf.js'\nimport { renderUiA } from './demos/demo-a-perf.js'\nimport demoB from './demos/demo-b-perf.js'\n//import demoE from './demos/demo-e.js'\n//import demoG from './demos/demo-g.js'\n\nconst worker = new Worker('worker.js')\n\nconst {ctx}= createCanvas({ width: window.innerWidth, height: 500 })\nconst demos = [demoA, demoB]\nlet demo\nlet frames = []\nlet currentDemo = 0\n\nconst preDemoA = {'a': { mult: 1, range: 80 }}\nconst preDemoB = {'b': { r: 15, range: 125, speed: 0.05 }}\n\nworker.postMessage(preDemoA)\nworker.onmessage = (e) => {\n  if(e.data['a']){\n    const [resetButton, speedButton] = renderUiA()\n    resetButton.onclick = () => {\n      preDemoA['a'].mult = 1\n      worker.postMessage(preDemoA)\n    }\n    speedButton.onclick = () => {\n      preDemoA['a'].mult += 1\n      worker.postMessage(preDemoA)\n    }\n    frames = e.data['a']\n    demo = demos[0](ctx, frames, preDemoA['a'].range)\n  }\n  if(e.data['b']){\n    frames = e.data['b']\n    demo = demos[1](ctx, frames, preDemoB['b'].range)\n  }\n}\n\nconst wrapper = document.getElementById('wrapper-demos')\nconst next = el('button', {'class': `btn normal-btn ${currentDemo === demos.length-1 ? 'disabled-btn': ''}`,\n}, 'Next')\nconst prev = el('button', {'class': 'btn normal-btn disabled-btn',\n}, 'Previous')\nprev.onclick = () => {\n  if(currentDemo === 0) return\n  worker.postMessage(preDemoA)\n  prev.classList.add('disabled-btn')\n  next.classList.remove('disabled-btn')\n  currentDemo -= 1\n}\nnext.onclick = () => {\n  if(currentDemo === demos.length-1) return\n  worker.postMessage(preDemoB)\n  prev.classList.remove('disabled-btn')\n  next.classList.add('disabled-btn')\n  currentDemo += 1\n}\nwrapper.appendChild(prev)\nwrapper.appendChild(next)\n\nconst draw = () => {\n  background('#eee', ctx)\n  if(demo) {\n    demo()\n  }\n  window.requestAnimationFrame(draw)\n}\ndraw()\n"]}