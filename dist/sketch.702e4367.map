{"version":3,"sources":["utils/createCanvas.js","utils/background.js","utils/createElement.js","utils/rect.js","utils/squares.js","utils/normalDist.js","utils/oscillator.js","demos/demo-a-perf.js","utils/circle.js","utils/miniEngine.js","utils/line.js","demos/demo-b-perf.js","utils/redCircle.js","demos/demo-g.js","sketch.js"],"names":["opts","canvas","document","createElement","container","getElementById","width","height","style","appendChild","ctx","getContext","color","fillStyle","fillRect","window","innerWidth","type","attr","element","Object","entries","forEach","key","value","setAttribute","children","child","createTextNode","x","y","w","h","c","callback","count","_","Array","map","el","i","index","length","mean","amp","angle","domTarget","innerHTML","speedButton","resetButton","wrapper","msg","initial","conf2","conf3","conf4","conf5","conf6","range","_index","preCalculate","mult","arr","n","keys","all","frames","calculatedFrames","frame","_singleCalc","_squares","square","Math","sin","parseFloat","toFixed","initialMult","pre","onclick","save","translate","floor","restore","r","beginPath","arc","PI","stroke","blackCircle","fill","offset","_r","strokeStyle","cos","x1","y1","x2","y2","moveTo","lineTo","init_ui","revealButton","cb","fix","getAngle","j","gridify","shape","_arr","greyline","rows","revealMechanism","revealOnclick","grid","calcAngle","_x","_y","precalc","_frames","obj","pxr","pyr","pxl","pyl","pxv","pyv","pxh","pyh","rMech","push","button","point","rm","series","reduce","agg","curr","fourier","_n","wave","_series","parentR","prevx","prevy","unshift","_wave","prevWave","pop","demo","double","reset","decrease","increase","initialCount","calcArr","initialY","isFirst","fn","demos","demoA","demoB","demoG","currentDemo","next","prev","draw","requestAnimationFrame"],"mappings":"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","file":"sketch.702e4367.map","sourceRoot":"../src","sourcesContent":["export default (opts) => {\n  const canvas = document.createElement('canvas')\n  const container = document.getElementById('canvas-container')\n  canvas.width = opts.width\n  canvas.height = opts.height\n  canvas.style = 'box-shadow: 1px 2px 10px 0px rgba(0,0,0,0.2)'\n  container.appendChild(canvas)\n  const ctx = canvas.getContext('2d')\n  return {canvas, ctx }\n}\n\n","export default (color, ctx) => {\n  ctx.fillStyle = color\n  ctx.fillRect(0, 0, window.innerWidth, 500)\n}\n\n","export default (type, attr = {}, ...children) => {\n  const element = document.createElement(type)\n  Object.entries(attr).forEach(([key, value]) => {\n    element.setAttribute(key, value)\n  })\n  children.forEach(child => {\n    if (typeof child === 'string') {\n      element.appendChild(document.createTextNode(child))\n    } else {\n      element.appendChild(child)\n    }\n  })\n  return element\n}\n","export default (opts, ctx) => {\n  const {x, y, w, h, c} = opts\n  ctx.fillStyle = c\n  ctx.fillRect(x, y, w, h)\n}\n\n","import rect from './rect.js'\n\nexport default (opts, callback, ctx) => {\n  let { count, x, y, w, h, c } = opts\n  let _ = [...Array(count)].map((el, i) => i)\n  return _.map(index => {\n    rect(\n      {\n        x: x + index * w,\n        y: callback ? callback(index, _.length) + y : y,\n        w: w,\n        h: h,\n        c: c,\n      },\n      ctx,\n    )\n  })\n}\n\n","export default (index, length) => {\n  const mean = length / 2\n  if (index === mean) {\n    return mean\n  }\n  if (index > mean) {\n    return length - index\n  }\n  if (index < mean) {\n    return index\n  }\n}\n\n","export default (amp, angle) => ({ amp, angle })\n","import squares from '../utils/squares.js'\nimport normalDist from '../utils/normalDist.js'\nimport oscillator from '../utils/oscillator.js'\nimport el from '../utils/createElement.js'\n\nexport default ctx => {\n  const domTarget = document.getElementById('wrapper')\n  domTarget.innerHTML = ''\n\n  const speedButton = el('button', {'class': 'btn normal-btn normal'}, '2X SPEED')\n  const resetButton = el('button', {'class': 'btn normal-btn normal'}, 'RESET')\n  const wrapper = el('div', {}, speedButton, resetButton)\n  const msg = el('div', {}, 'pre-calculating...')\n  // setup\n  const initial = {\n    count: 20,\n    x: -100,\n    y: -140,\n    w: 10,\n    h: 10,\n    c: 'rgb(250, 30, 50)',\n  }\n  const {y} = initial\n  const conf2 = {...initial, y: y + 50, c: 'rgb(250,30,80)'}\n  const conf3 = {...initial, y: y + 100, c: 'rgb(250,30,100)'}\n  const conf4 = {...initial, y: y + 150, c: 'rgb(200,30,100)'}\n  const conf5 = {...initial, y: y + 200, c: 'rgb(100,30,200)'}\n  const conf6 = {...initial, y: y + 250, c: 'rgb(100,30,250)'}\n  let range = 80\n  let _index = 0\n  const preCalculate = (mult) => {\n    let {amp, angle} = oscillator(1, 0)\n    const arr = n => [...Array(n).keys()]\n    const all = arr(6).map(_ => arr(20))\n    range *= mult === 1 ? mult : mult / 2\n    const frames = arr(range)\n    const calculatedFrames = frames.map(frame => {\n      const _singleCalc = all.map((_squares, i) => {\n        return _squares.map(square => {\n          if (i === 0) {\n            const c = (amp + 12) * Math.sin(angle + square * 3)\n            return parseFloat(c.toFixed(2))\n          }\n          if (i === 1) {\n            const _ = normalDist(square, 20)\n            const c = amp * _ * 2 * Math.sin(angle + square * 3)\n            return parseFloat(c.toFixed(2))\n          }\n          if (i === 2) {\n            const _ = normalDist(square, 20)\n            const c = amp * _ * Math.sin(angle + _)\n            return parseFloat(c.toFixed(2))\n          }\n          if (i === 3) {\n            const _ = normalDist(square, 20)\n            const c = amp * _ * Math.sin(angle + square + 0.3)\n            return parseFloat(c.toFixed(2))\n          }\n          if (i === 4) {\n            const c = (amp + square / 2) * Math.sin(angle + square)\n            return parseFloat(c.toFixed(2))\n          }\n          if(i === 5) {\n            const c = amp * 10 * Math.sin(angle + square)\n            return parseFloat(c.toFixed(2))\n          }\n          return square\n        })\n      })\n      angle += 0.08 * mult\n      return _singleCalc\n    })\n    return calculatedFrames\n  }\n  let initialMult = 1\n  let pre = preCalculate(initialMult)\n\n  resetButton.onclick = () => {\n    pre = preCalculate(initialMult = 1)\n  }\n  speedButton.onclick = () => {\n    pre = preCalculate(initialMult+=1)\n  }\n  domTarget.appendChild(wrapper)\n  // side-effect\n  return () => {\n    ctx.save()\n    ctx.translate(Math.floor(window.innerWidth / 2), 250)\n    squares(initial, index => pre[_index][0][index], ctx)\n    squares(conf2, index => pre[_index][1][index], ctx)\n    squares(conf3, index => pre[_index][2][index], ctx)\n    squares(conf4, index => pre[_index][3][index], ctx)\n    squares(conf5, index => pre[_index][4][index], ctx)\n    squares(conf6, index => pre[_index][5][index], ctx)\n    _index += 1\n    if(_index >= range) _index = _index%range\n    ctx.restore()\n  }\n}\n","export default (x, y, r, ctx) => {\n  ctx.beginPath()\n  ctx.arc(x, y, r, 0, 2 * Math.PI)\n  ctx.stroke()\n}\n","import circle from './circle.js'\n\nconst blackCircle = (x, y, r, ctx) => {\n  ctx.save()\n  ctx.fillStyle = '#333'\n  circle(x, y, r, ctx)\n  ctx.fill()\n  ctx.restore()\n}\nexport default (x, y, r, offset, angle, ctx) => {\n  const _r = r / 3\n  ctx.save()\n  ctx.strokeStyle = 'rgba(0,0,0,0.1)'\n  circle(x, y, r, ctx)\n  blackCircle(\n    x + r * Math.cos(angle + offset),\n    y + r * Math.sin(angle + offset),\n    _r*0.7,\n    ctx\n  )\n  ctx.restore()\n}\n\n","export default (x1, y1, x2, y2, ctx) => {\n  ctx.beginPath()\n  ctx.moveTo(x1, y1)\n  ctx.lineTo(x2, y2)\n  ctx.stroke()\n}\n","import miniEngine from '../utils/miniEngine.js'\nimport oscillator from '../utils/oscillator.js'\nimport line from '../utils/line.js'\nimport el from '../utils/createElement.js'\n\nconst init_ui = () => {\n  const domTarget = document.getElementById('wrapper')\n  domTarget.innerHTML = ''\n  const revealButton = el('button',\n    {'class': 'btn normal-btn normal'},\n    'Reveal Mechanism'\n  )\n  domTarget.appendChild(revealButton)\n  return (cb) => {\n    revealButton.onclick = () => {\n      cb(revealButton)\n    }\n  }\n}\n\n// need to precalculate for mobile perf\nconst fix = n => parseFloat(n.toFixed(2))\nconst getAngle = (angle, j) => angle + j*100\nconst offset = (x, y) => (x+y)/2\nconst gridify = (shape, cb) => shape.map((x) => shape.map((y, j) => cb(x, y, j)))\nconst _arr = n => [...Array(n).keys()]\n\nconst greyline = (x, y, x1, y1, ctx) => {\n  ctx.save()\n  ctx.strokeStyle = '#aaa'\n  line(x, y, x1, y1, ctx)\n  ctx.restore()\n}\n\nexport default (ctx) => {\n  // config.\n  const r = 15 // radius of each circle\n  const rows = [...Array(Math.floor(100/r))].map((el, index) => (index + 1) * 40 - r)\n  let revealMechanism = false\n  let revealOnclick = init_ui()\n  const range = 125\n  // grid config.\n  const grid = gridify(rows, (x, y, j) => {\n    return (angle) => {\n      const calcAngle = (j, x, y) => getAngle(angle, j) + offset(x, y)\n      const _x = x + r * Math.cos(fix(calcAngle(j, x,y)))\n      const _y = y + r * Math.sin(fix(calcAngle(j, x,y)))\n      return {x: fix(_x), y: fix(_y)}\n    }\n  })\n  const precalc = (() => {\n    let frames = _arr(range)\n    let { angle } = oscillator(1, 0.0)\n    const _frames = []\n    frames.map(frame => {\n      let arr = []\n      rows.map((x, i) => {\n        rows.map((y, j) => {\n          const obj = {}\n          const _x = grid[i][j](angle).x\n          const _y = grid[i][j](angle).y\n          obj.x = _x\n          obj.y = _y\n          if(i + 1 < rows.length && j + 1 < rows.length){\n            // cross right lines\n            const pxr = grid[i+1][j+1](angle).x\n            const pyr = grid[i+1][j+1](angle).y\n            obj.pxr = pxr\n            obj.pyr = pyr\n          }\n          if(j-1 >= 0 && i + 1 < rows.length){\n            // cross left lines\n            const pxl = grid[i+1][j-1](angle).x\n            const pyl = grid[i+1][j-1](angle).y\n            obj.pxl = pxl\n            obj.pyl = pyl\n          }\n          if(j+1 < rows.length) {\n            // vertical lines\n            const pxv = grid[i][j + 1](angle).x\n            const pyv = grid[i][j + 1](angle).y\n            obj.pxv = pxv\n            obj.pyv = pyv\n          }\n          if(i+1 <= rows.length-1) {\n            // horizontal lines\n            const pxh = grid[i + 1][j](angle).x\n            const pyh = grid[i + 1][j](angle).y\n            obj.pxh = pxh\n            obj.pyh = pyh\n          }\n          obj.rMech = {\n            x, y, _x, _y,\n            offset: fix(offset(x, y)),\n            angle: fix(getAngle(angle, j))\n          }\n          arr.push(obj)\n        })\n      })\n      angle += 0.05\n      _frames.push(arr)\n    })\n    return _frames\n  })()\n  revealOnclick((button) =>{\n    if(!revealMechanism) button.innerHTML = 'Hide Mechanism'\n    if(revealMechanism)button.innerHTML = 'Reveal Mechanism'\n    revealMechanism = !revealMechanism\n  }) // dom minipulation\n  let _index = 0\n  return () => {\n    ctx.save()\n    ctx.translate(window.innerWidth/2 - 120, 120)\n    precalc[_index].map(point => {\n      const { x, y } = point\n      if(point.pxr && point.pyr){\n        const {pxr, pyr} = point\n        greyline(x, y, pxr, pyr, ctx)\n      }\n      if(point.pxl && point.pyl){\n        const {pxl, pyl} = point\n        greyline(x, y, pxl, pyl, ctx)\n      }\n      if(point.pxv && point.pyv){\n        const {pxv, pyv} = point\n        line(x, y, pxv, pyv, ctx)\n      }\n      if(point.pxh && point.pyh){\n        const {pxh, pyh} = point\n        line(x, y, pxh, pyh, ctx)\n      }\n      if(revealMechanism){\n        const {rMech: rm} = point\n        greyline(rm.x, rm.y, x, y, ctx)\n        miniEngine(rm.x, rm.y, r, rm.offset, rm.angle, ctx)\n      }\n    })\n    ctx.restore()\n    _index += 1\n    if(_index >= range) {\n      _index = _index%range\n    }\n  }\n}\n\n","import circle from './circle.js'\n\nexport default (x, y, r, ctx) => {\n  ctx.save()\n  ctx.strokeStyle = 'red'\n  circle(x, y, r, ctx)\n  ctx.restore()\n}\n\n","import oscillator from '../utils/oscillator.js'\nimport circle from '../utils/circle.js'\nimport line from '../utils/line.js'\nimport redCircle from '../utils/redCircle.js'\nimport el from '../utils/createElement.js'\n\n\nconst series = n => [...Array(Math.floor(n/2) + 1)]\n  .map((el, i) => i)\n  .reduce((agg, curr) => agg.push(curr * 2 + 1) && agg, [])\n\nconst fourier = (_x, _y, _n, ctx) => {\n  let {angle} = oscillator(1, 0)\n  const wave = []\n  const _series = series(_n)\n  return () => {\n    let [x, y, parentR] = [_x, _y, 30]\n    _series.map((n) => {\n      let [prevx, prevy, r] = [x, y, parentR * (4 / (n * Math.PI))]\n      x += r * Math.cos(n * angle)\n      y += r * Math.sin(n * angle)\n      circle(prevx, prevy, r, ctx)\n      redCircle(x, y, 3, ctx)\n      line(prevx, prevy, x, y, ctx)\n    })\n    // add wave\n    wave.unshift(y)\n    // draw wave\n    wave.map((_wave, i, arr) =>{\n      const prevWave = arr[i - 1]\n      if(prevWave) {\n        line(i+180, _wave, i-1+180, prevWave, ctx)\n        //circle(i + 180, _wave, 1, ctx)\n      }else{\n        circle(i + 180, _wave, 3, ctx)\n      }\n    })\n    // clean waves array\n    if(wave.length > 305) wave.pop()\n    line(x, y, 180, y, ctx)\n    line(180, 0, 180, 500, ctx)\n    angle += 0.1\n  }\n}\nexport default (ctx) => {\n  const domTarget = document.getElementById('wrapper')\n  domTarget.innerHTML = ''\n  const demo = 'fourier'\n  const double = el('button', {'class': 'btn normal-btn', 'id': 'double'}, 'x2')\n  const reset = el('button', {'class': 'btn normal-btn', 'id': 'reset'}, 'reset')\n  const decrease = el('button', {'class': 'btn normal-btn', 'id': 'dec'}, '▼')\n  const increase = el('button', {'class': 'btn normal-btn', 'id': 'inc'}, '▲')\n\n  const wrapper = el('div',\n    {'id': `wrapper-${demo}`},\n    double, reset, decrease, increase\n  )\n  domTarget.appendChild(wrapper)\n\n  let mult = 1\n  let initialCount = 6\n  const calcArr = (initialCount, mult, initialY = 80) => {\n    const isFirst = i => i === 0\n    return series(initialCount).map((n, i) => isFirst(i)\n      ? fourier(80, initialY, n*mult, ctx)\n      : fourier(80, initialY += 110, n*mult, ctx)\n    )\n  }\n  let arr = calcArr(initialCount, mult)\n\n  double.onclick = () => {\n    mult += 2\n    arr = calcArr(initialCount, mult)\n  }\n  reset.onclick = () => {\n    mult = 1\n    arr = calcArr(initialCount, mult)\n  }\n  decrease.onclick = () => {\n    if(initialCount === 0) {return}\n    initialCount -= 2\n    arr = calcArr(initialCount, mult)\n  }\n  increase.onclick = () => {\n    if(initialCount === 6) {return}\n    initialCount += 2\n    arr = calcArr(initialCount, mult)\n  }\n  return ()=> {\n    ctx.save()\n    ctx.translate(window.innerWidth/2 - 200, 0)\n    arr.map(fn => fn())\n    ctx.restore()\n  }\n}\n","import createCanvas from './utils/createCanvas.js'\nimport background from './utils/background.js'\nimport el from './utils/createElement.js'\n\nimport demoA from './demos/demo-a-perf.js'\nimport demoB from './demos/demo-b-perf.js'\n//import demoE from './demos/demo-e.js'\nimport demoG from './demos/demo-g.js'\n\n\nconst {ctx}= createCanvas({ width: window.innerWidth, height: 500 })\nconst demos = [demoA, demoB, demoG]\n\nlet currentDemo = 0\nlet demo = demos[currentDemo](ctx)\n\nconst next = el('button', {'class': `btn normal-btn ${currentDemo === demos.length-1 ? 'disabled-btn': ''}`,\n}, 'Next')\nconst prev = el('button', {'class': 'btn normal-btn disabled-btn',\n}, 'Previous')\n\nprev.onclick = () => {\n  if(currentDemo === 0) return\n  if(currentDemo <= 1) {\n    currentDemo -= 1\n    demo = demos[currentDemo](ctx)\n    prev.style.color = '#aaa'\n    return\n  }\n  next.style.color = '#222'\n  prev.style.color = '#222'\n  currentDemo -= 1\n  demo = demos[currentDemo](ctx)\n}\nnext.onclick = () => {\n  if(currentDemo === demos.length-1) return\n  if(currentDemo >= demos.length-2) {\n    currentDemo += 1\n    demo = demos[currentDemo](ctx)\n    next.style.color = '#aaa'\n    return\n  }\n  next.style.color = '#222'\n  prev.style.color = '#222'\n  currentDemo += 1\n  demo = demos[currentDemo](ctx)\n}\n\nconst wrapper = document.getElementById('wrapper-demos')\nwrapper.appendChild(prev)\nwrapper.appendChild(next)\n\nconst draw = () => {\n  background('#eee', ctx)\n  demo()\n  window.requestAnimationFrame(draw)\n}\ndraw()\n"]}