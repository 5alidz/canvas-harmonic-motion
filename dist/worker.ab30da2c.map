{"version":3,"sources":["utils/oscillator.js","utils/normalDist.js","worker.js"],"names":["amp","angle","index","length","mean","preCalculateA","mult","range","arr","n","Array","keys","all","map","_","frames","calculatedFrames","frame","_singleCalc","_squares","i","square","c","Math","sin","parseFloat","toFixed","preCalculateB","r","speed","fix","getAngle","j","offset","x","y","gridify","shape","cb","_arr","rows","floor","el","grid","calcAngle","_x","cos","_y","_frames","obj","pxr","pyr","pxl","pyl","pxv","pyv","pxh","pyh","rMech","push","onmessage","e","data","precalc","postMessage"],"mappings":"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","file":"worker.ab30da2c.map","sourceRoot":"../src","sourcesContent":["export default (amp, angle) => ({ amp, angle })\n","export default (index, length) => {\n  const mean = length / 2\n  if (index === mean) {\n    return mean\n  }\n  if (index > mean) {\n    return length - index\n  }\n  if (index < mean) {\n    return index\n  }\n}\n\n","import oscillator from './utils/oscillator.js'\nimport normalDist from './utils/normalDist.js'\n\nconst preCalculateA = (mult, range) => {\n  let {amp, angle} = oscillator(1, 0)\n  const arr = n => [...Array(n).keys()]\n  const all = arr(6).map(_ => arr(20))\n  range *= mult === 1 ? mult : mult / 2\n  const frames = arr(range)\n  const calculatedFrames = frames.map(frame => {\n    const _singleCalc = all.map((_squares, i) => {\n      return _squares.map(square => {\n        if (i === 0) {\n          const c = (amp + 12) * Math.sin(angle + square * 3)\n          return parseFloat(c.toFixed(2))\n        }\n        if (i === 1) {\n          const _ = normalDist(square, 20)\n          const c = amp * _ * 2 * Math.sin(angle + square * 3)\n          return parseFloat(c.toFixed(2))\n        }\n        if (i === 2) {\n          const _ = normalDist(square, 20)\n          const c = amp * _ * Math.sin(angle + _)\n          return parseFloat(c.toFixed(2))\n        }\n        if (i === 3) {\n          const _ = normalDist(square, 20)\n          const c = amp * _ * Math.sin(angle + square + 0.3)\n          return parseFloat(c.toFixed(2))\n        }\n        if (i === 4) {\n          const c = (amp + square / 2) * Math.sin(angle + square)\n          return parseFloat(c.toFixed(2))\n        }\n        if (i === 5) {\n          const c = amp * 10 * Math.sin(angle + square)\n          return parseFloat(c.toFixed(2))\n        }\n        return square\n      })\n    })\n    angle += 0.08 * mult\n    return _singleCalc\n  })\n  return calculatedFrames\n}\n\nconst preCalculateB = (r, range, speed) => {\n  const fix = n => parseFloat(n.toFixed(2))\n  const getAngle = (angle, j) => angle + j * 100\n  const offset = (x, y) => (x + y) / 2\n  const gridify = (shape, cb) =>\n    shape.map(x => shape.map((y, j) => cb(x, y, j)))\n  const _arr = n => [...Array(n).keys()]\n\n  const rows = [...Array(Math.floor(100 / r))].map(\n    (el, index) => (index + 1) * 40 - r,\n  )\n  // grid config.\n  const grid = gridify(rows, (x, y, j) => {\n    return angle => {\n      const calcAngle = (j, x, y) => getAngle(angle, j) + offset(x, y)\n      const _x = x + r * Math.cos(fix(calcAngle(j, x, y)))\n      const _y = y + r * Math.sin(fix(calcAngle(j, x, y)))\n      return {x: fix(_x), y: fix(_y)}\n    }\n  })\n  let frames = _arr(range)\n  let {angle} = oscillator(1, 0.0)\n  const _frames = []\n  frames.map(frame => {\n    let arr = []\n    rows.map((x, i) => {\n      rows.map((y, j) => {\n        const obj = {}\n        const _x = grid[i][j](angle).x\n        const _y = grid[i][j](angle).y\n        obj.x = _x\n        obj.y = _y\n        if (i + 1 < rows.length && j + 1 < rows.length) {\n          // cross right lines\n          const pxr = grid[i + 1][j + 1](angle).x\n          const pyr = grid[i + 1][j + 1](angle).y\n          obj.pxr = pxr\n          obj.pyr = pyr\n        }\n        if (j - 1 >= 0 && i + 1 < rows.length) {\n          // cross left lines\n          const pxl = grid[i + 1][j - 1](angle).x\n          const pyl = grid[i + 1][j - 1](angle).y\n          obj.pxl = pxl\n          obj.pyl = pyl\n        }\n        if (j + 1 < rows.length) {\n          // vertical lines\n          const pxv = grid[i][j + 1](angle).x\n          const pyv = grid[i][j + 1](angle).y\n          obj.pxv = pxv\n          obj.pyv = pyv\n        }\n        if (i + 1 <= rows.length - 1) {\n          // horizontal lines\n          const pxh = grid[i + 1][j](angle).x\n          const pyh = grid[i + 1][j](angle).y\n          obj.pxh = pxh\n          obj.pyh = pyh\n        }\n        obj.rMech = {\n          x,\n          y,\n          _x,\n          _y,\n          offset: fix(offset(x, y)),\n          angle: fix(getAngle(angle, j)),\n        }\n        arr.push(obj)\n      })\n    })\n    angle += speed\n    _frames.push(arr)\n  })\n  return _frames\n}\nonmessage = e => {\n  if (e.data['a']) {\n    const precalc = preCalculateA(e.data['a'].mult, e.data['a'].range)\n    postMessage({'a': precalc})\n  }\n  if(e.data['b']) {\n    const precalc = preCalculateB(e.data['b'].r, e.data['b'].range, e.data['b'].speed)\n    postMessage({'b': precalc})\n  }\n}\n"]}